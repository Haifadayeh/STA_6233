---
title: "Creating Shiny Apps"
author: "Matthew J. Martinez, PhD"
date: "4/9/2020"
output: html_document
runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Shiny Basics

What is a Shiny app? Well, think of Shiny apps as light applets that allow you to create interactive visualizations of your data in real-time. Shiny apps allow end-users to manipulate tables and graphs, curate new data, filter data for new visualizations, and a host of other items that put the data story in the hands of users. You can find some great examples of [Shiny apps here](https://shiny.rstudio.com/gallery/). I have some personal apps that I created for [demonstration purposes](https://matthew-j-martinez.shinyapps.io/Organizations_Test_Data/) as well. It may be helpful to refer to the following resources while developing shiny apps including the [Shiny Cheatsheet](https://shiny.rstudio.com/images/shiny-cheatsheet.pdf), this [tutorial](https://shiny.rstudio.com/tutorial/), these [Shiny instructional videos](https://resources.rstudio.com/shiny-2), and especially this [Shiny workshop](https://github.com/mattdemography/shinymark) by Daniel Kaplan which was heavily referenced in the creation of this lesson.

At the end of these few weeks you will be able to [deploy](https://www.shinyapps.io/) a live app that can be viewed on your computer, phone, tablet, or other internet device. You will need to create a user account with https://www.shinyapps.io/ in order to deploy and share your Shiny app. You can use your Github account or Google account as well to speed up registration and logging in. You do not have to deploy a Shiny app to view it as you can host the app on your local computer. If you desire others to view and interact with your app then you will need to deploy it.  

#### **Shiny App Components**  
**The Library**  
library(shiny) - This brings in the library.

**The User Interface (ui)**  
ui <- fluidPage() - This is the user interface for the application. It controls the layout and appearance of the application.

**The Server Instructions**  
server <- function(input, output) {} - The server function tells the app how to be built and operate.

**The App**  
shinyApp(ui = ui, server = server) - This knits the two components together.

All shiny apps will have this very basic template. They obviously will be much more detailed as you build your app, but these components are necessary for your app to properly function.

#### **Starting a Shiny App**  
You start building a shiny app by clicking *File -> New File -> Shiny Web App* and choosing a name for the application. The code below creates the attached application. We will then go through each section so that you can better understand the app components.


```{r pressure, echo=TRUE}
#Load the Library
library(shiny)
library(ggplot2)
t<-read.csv("./Data/nic-cage.csv", stringsAsFactors = F)
t$RottenTomatoes<-as.numeric(t$RottenTomatoes)
t$Years<-as.numeric(t$Years)

# Define UI for application that draws a histogram
ui <- fluidPage(

    # Application title
    titlePanel("Nicolas Cage \"American Hero\" Data"),

    # Sidebar layout
    sidebarLayout(
        #Inputs: Select which inputs from the data we want to display
        sidebarPanel(
            #Select variable for y-axis
                  selectInput(inputId = "y", 
                  label = "Y-axis:",
                  choices = c("RottenTomatoes"), 
                  selected = "Rating"),
            #Select X-axix variables
                  selectInput(inputId = "x", 
                  label = "X-axis:",
                  choices = c("Voice", "Year"), 
                  selected = "Year")
        ),

        #Output: Type of plot
        mainPanel(
           plotOutput(outputId = "FreqTab") #Any name can go where "FreqTab" is, but be sure to keep it consistent with name in output$FreqTab in the server section
        )
    )
)

# Define server logic required to draw a histogram
server <- function(input, output) {

    output$FreqTab <- renderPlot({
        # draw the histogram with the specified number of bins
        hist(data=t, x, col = 'darkgray', border = 'white')
    })
}

# Run the application 
shinyApp(ui = ui, server = server)

```

Let's take a closer look at this simple app by first examining the user interface portion of the code.

ggplot(t, aes_string(x=t$Voice, y=t$Rating))


> ui <- fluidPage(  
>    titlePanel("Old Faithful Geyser Data"),  
>    # Sidebar with a slider input for number of bins 
>    sidebarLayout(
>        sidebarPanel(
>            sliderInput("bins",
>                        "Number of bins:",
>                        min = 1,
>                        max = 50,
>                        value = 30)
>        ),
>    # Show a plot of the generated distribution
>        mainPanel(
>           plotOutput("distPlot")
>        )
>    )
>)
